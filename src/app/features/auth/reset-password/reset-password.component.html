<div class="reset-password-container">
  <div class="reset-password-wrapper">
    <div class="reset-password-header">
      <div class="logo">
        <i class="pi pi-dumbbell"></i>
        <h1>MauricioGym</h1>
      </div>
      <p class="subtitle">Redefinir senha</p>
    </div>

    <p-card class="reset-password-card">
      <div *ngIf="isValidToken" class="reset-password-form-container">
        <div class="form-description">
          <h3>Nova Senha</h3>
          <p>Digite sua nova senha abaixo. Certifique-se de escolher uma senha segura.</p>
        </div>

        <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="reset-password-form">
          <div class="form-group">
            <label for="password" class="form-label">Nova Senha</label>
            <p-password
              formControlName="password"
              placeholder="Digite sua nova senha"
              [toggleMask]="true"
              [feedback]="true"
              styleClass="w-100"
              inputStyleClass="form-control"
              [class.is-invalid]="isFieldInvalid('password')"
              autocomplete="new-password"
            ></p-password>
            <div class="invalid-feedback" *ngIf="isFieldInvalid('password')">
              {{ getFieldError('password') }}
            </div>
          </div>

          <div class="form-group">
            <label for="confirmPassword" class="form-label">Confirmar Nova Senha</label>
            <p-password
              formControlName="confirmPassword"
              placeholder="Confirme sua nova senha"
              [toggleMask]="true"
              [feedback]="false"
              styleClass="w-100"
              inputStyleClass="form-control"
              [class.is-invalid]="isFieldInvalid('confirmPassword')"
              autocomplete="new-password"
            ></p-password>
            <div class="invalid-feedback" *ngIf="isFieldInvalid('confirmPassword')">
              {{ getFieldError('confirmPassword') }}
            </div>
          </div>

          <div class="form-actions">
            <p-button
              type="submit"
              label="Redefinir Senha"
              icon="pi pi-check"
              [loading]="loading"
              [disabled]="resetPasswordForm.invalid"
              styleClass="w-100 reset-button"
            ></p-button>
          </div>
        </form>
      </div>

      <div *ngIf="!isValidToken" class="invalid-token-container">
        <div class="error-icon">
          <i class="pi pi-times-circle"></i>
        </div>
        <h3>Link Inválido</h3>
        <p class="error-message">
          O link de redefinição de senha é inválido ou expirou.
          Solicite um novo link para redefinir sua senha.
        </p>
        <div class="error-actions">
          <p-button
            type="button"
            label="Solicitar Novo Link"
            icon="pi pi-refresh"
            styleClass="request-link-button"
            (click)="onRequestNewLink()"
          ></p-button>
        </div>
      </div>

      <div class="reset-password-footer">
        <button
          type="button"
          class="back-to-login-link"
          (click)="onBackToLogin()"
        >
          <i class="pi pi-arrow-left"></i>
          Voltar ao login
        </button>
      </div>
    </p-card>
  </div>
</div>